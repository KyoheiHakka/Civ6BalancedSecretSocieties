-- RevealPromotions
-- Author: hina8
-- DateCreated: 2024/11/10
--------------------------------------------------------------

UPDATE GovernorPromotionConditions SET HiddenWithoutPrereqs=0;
UPDATE GovernorPromotionConditions SET EarliestGameEra = NULL;

UPDATE SecretSocieties
SET DiscoverAtGoodyHutBaseChance = '85'
WHERE SecretSocietyType == 'SECRETSOCIETY_SANGUINE_PACT';

UPDATE SecretSocieties
SET DiscoverAtGoodyHutBaseChance = '60'
WHERE SecretSocietyType == 'SECRETSOCIETY_HERMETIC_ORDER';

UPDATE SecretSocieties
SET DiscoverAtGoodyHutBaseChance = '75'
WHERE SecretSocietyType == 'SECRETSOCIETY_OWLS_OF_MINERVA';

UPDATE SecretSocieties
SET DiscoverAtCityStateBaseChance = '50'
WHERE DiscoverAtCityStateBaseChance = 0;

UPDATE SecretSocieties
SET DiscoverAtNaturalWonderBaseChance = '50'
WHERE DiscoverAtNaturalWonderBaseChance = 0;

-- <!-- レイラインの隣接ボーナス 科学のみ +3 -->
UPDATE Adjacency_YieldChanges
SET YieldChange = 3
WHERE ID == 'LeyLine_Science';

-- <!-- キャンパスを持ってたらの条件付 -->
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('CITY_HAS_DISTRICT_CAMPUS', 'REQUIREMENTSET_TEST_ALL');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('CITY_HAS_DISTRICT_CAMPUS', 'REQUIRES_CITY_HAS_CAMPUS');

-- <!-- キャンパスの住宅+2 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId)
VALUES ('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'MODIFIER_PLAYER_CITIES_ADJUST_BUILDING_HOUSING', 'CITY_HAS_DISTRICT_CAMPUS');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'KIND_MODIFIER');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'Amount', 2);

-- <!-- キャンパスの快適+1 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId)
VALUES ('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'MODIFIER_CITY_DISTRICTS_ADJUST_DISTRICT_AMENITY', 'CITY_HAS_DISTRICT_CAMPUS');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'KIND_MODIFIER');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'Amount', 1);

INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'Preview', 'LOC_KH_HERMES_CAMPUS_AMENITY_DESCRIPTION'),
('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'Preview', 'LOC_KH_HERMES_CAMPUS_HOUSING_DESCRIPTION');

-- <!-- ヘルメスの能力にくっつけ -->
INSERT OR IGNORE INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES 
('GOVERNOR_PROMOTION_HERMETIC_ORDER_1', 'MODIFIER_KH_HERMES_CAMPUS_AMENITY'),
('GOVERNOR_PROMOTION_HERMETIC_ORDER_1', 'MODIFIER_KH_HERMES_CAMPUS_HOUSING');

-- <!-- 交易強化の参考 -->
-- <!-- TraitModifiers: TRAIT_CIVILIZATION_TREASURE_FLEET → Spainの交易 -->
-- <!-- TRAIT_INTERNATIONAL_TRADE_GAIN_GOLD -->
-- <!-- 国外交易のModifier追加 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType) VALUES 
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD', 'MODIFIER_PLAYER_ADJUST_TRADE_ROUTE_YIELD_FOR_INTERNATIONAL'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'MODIFIER_PLAYER_ADJUST_TRADE_ROUTE_YIELD_FOR_INTERNATIONAL'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD', 'MODIFIER_PLAYER_ADJUST_TRADE_ROUTE_YIELD_FOR_INTERNATIONAL');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD', 'KIND_MODIFIER'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'KIND_MODIFIER'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD', 'KIND_MODIFIER');

-- <!-- 食料と生産 + 2 AND ゴールド + 4 -->
INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD', 'Amount', '2'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD', 'YieldType', 'YIELD_FOOD'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'Amount', '2'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD', 'Amount', '4'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD', 'YieldType', 'YIELD_GOLD');

-- <!-- ミネルヴァの能力にくっつけ -->
INSERT OR IGNORE INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES 
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD'),
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION'),
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD');

INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_FOOD', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_FOOD_DESCRIPTION'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION_DESCRIPTION'),
('MODIFIER_KH_MINERVA_TRADE_BONUS_YIELD_GOLD', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_GOLD_DESCRIPTION');

-- -- <!-- 吸血鬼 -->

INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType) VALUES 
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'PercentDefeatedStrength', '100'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'YieldType', 'YIELD_GOLD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'PercentDefeatedStrength', '50'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'YieldType', 'YIELD_SCIENCE'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'PercentDefeatedStrength', '50'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'YieldType', 'YIELD_CULTURE');

INSERT OR IGNORE INTO UnitAbilityModifiers (UnitAbilityType, ModifierId) VALUES 
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD'),
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE'),
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE');

INSERT OR IGNORE INTO UnitAbilities (UnitAbilityType, Name, Description)
VALUES ('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'LOC_Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD_NAME', 'LOC_Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD_DESCRIPTION');

INSERT INTO Types (Type, Kind) VALUES
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'KIND_ABILITY'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'KIND_MODIFIER'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'KIND_MODIFIER'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'KIND_MODIFIER');

INSERT INTO TypeTags (Type, Tag) VALUES
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'CLASS_VAMPIRE');
