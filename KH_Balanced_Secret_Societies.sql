<!-- 秘密結社を中世で全部解放 -->

UPDATE 
	GovernorPromotionConditions 
SET 
	EarliestGameEra = NULL
WHERE
	HiddenWithoutPrereqs != 0;

UPDATE 
	GovernorPromotionConditions 
SET 
	HiddenWithoutPrereqs = 0
WHERE
	HiddenWithoutPrereqs != 0;

<!-- LeyLineの強化 -->
<!-- レイラインが沸いた位置の生産 + 2、 科学 + 1、ゴールド + 3 -->
<!-- レイラインの隣接ボーナス + 3 -->

<!-- INSERT OR IGNORE INTO RESORUCES_YieldChanges (ResourceType, YieldType, YieldChange) VALUES 
('RESOURCE_LEY_LINE', 'YIELD_GOLD', 3),
('RESOURCE_LEY_LINE', 'YIELD_SCIENCE', 1),
('RESOURCE_LEY_LINE', 'YIELD_PRODUCTION', 2); -->

<!-- レイラインの隣接ボーナス 科学のみ +3 -->
UPDATE Adjacency_YieldChanges
SET YieldChange = 3
WHERE ID == 'LeyLine_Science';

<!-- キャンパスの住宅+2 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType)
VALUES ('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'MODIFIER_PLAYER_CITIES_ADJUST_BUILDING_HOUSING');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'KIND_MODIFIER');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES
('', 'Amount', 2);

<!-- キャンパスの快適+1 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType)
VALUES ('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'MODIFIER_PLAYER_DISTRICT_ADJUST_DISTRICT_AMENITY');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'KIND_MODIFIER');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'Amount', 1);

INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_KH_HERMES_CAMPUS_AMENITY', 'Preview', 'LOC_KH_HERMES_CAMPUS_AMENITY_DESCRIPTION'),
('MODIFIER_KH_HERMES_CAMPUS_HOUSING', 'Preview', 'LOC_KH_HERMES_CAMPUS_HOUSING_DESCRIPTION');

<!-- ヘルメスの能力にくっつけ -->
INSERT OR IGNORE INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES 
('GOVERNOR_PROMOTION_HERMETIC_ORDER_1', 'MODIFIER_KH_HERMES_CAMPUS_AMENITY'),
('GOVERNOR_PROMOTION_HERMETIC_ORDER_1', 'MODIFIER_KH_HERMES_CAMPUS_HOUSING');

<!-- 交易強化の参考 -->
<!-- TraitModifiers: TRAIT_CIVILIZATION_TREASURE_FLEET → Spainの交易 -->
<!-- TRAIT_INTERNATIONAL_TRADE_GAIN_GOLD -->
<!-- 国外交易のModifier追加 -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType) VALUES 
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD', 'MODIFIER_PLAYER_CITIES_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'MODIFIER_PLAYER_CITIES_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD', 'MODIFIER_PLAYER_CITIES_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS');

INSERT OR IGNORE INTO Types (Type, Kind) VALUES
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD', 'KIND_MODIFIER'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'KIND_MODIFIER'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD', 'KIND_MODIFIER');

<!-- 食料と生産 + 2 AND ゴールド + 4 -->
INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD', 'Amount', '2'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD', 'YieldType', 'YIELD_FOOD'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'Amount', '2'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'YieldType', 'YIELD_PRODUCTION'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD', 'Amount', '4'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD', 'YieldType', 'YIELD_GOLD');

<!-- ミネルヴァの能力にくっつけ -->
INSERT OR IGNORE INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES 
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD'),
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION'),
('GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1', 'MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD');

INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_FOOD', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_FOOD_DESCRIPTION'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_PRODUCTION', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION_DESCRIPTION'),
('MODIFIER_KH__MINERVA_TRADE_BONUS_YIELD_GOLD', 'Preview', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_GOLD_DESCRIPTION');

<!-- 吸血鬼 -->
<!-- こやから出る -->
UPDATE SecretSocieties
SET DiscoverAtGoodyHutBaseChance = '70'
WHERE SecretSocietyType == 'SECRETSOCIETY_SANGUINE_PACT';

<!-- 敵を倒したら色々出てくる -->
<!-- MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD -->
INSERT OR IGNORE INTO Modifiers (ModifierId, ModifierType) VALUES 
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD');

INSERT OR IGNORE INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'PercentDefeatedStrength', '100'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'YieldType', 'YIELD_GOLD'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'PercentDefeatedStrength', '50'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'YieldType', 'YIELD_SCIENCE'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'PercentDefeatedStrength', '50'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'YieldType', 'YIELD_CULTURE');

<!-- 移動力 4 -->
UPDATE Units
SET BaseMoves = '4'
WHERE UnitType == 'UNIT_VAMPIRE';

<!-- 吸血鬼の能力にくっつけ -->
UPDATE Units
SET TraitType = 'MODIFIER_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD'
WHERE UnitType == 'UNIT_VAMPIRE';

<!-- UnitAbilityに追加 -->
INSERT OR IGNORE INTO UnitAbilies (UnitAbilityType, Name, Description)
VALUES ('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'LOC_Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD_NAME', 'Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD_DESCRIPTION');

<!-- UnitAbilityTypeに紐付け -->
INSERT OR IGNORE INTO UnitAbilityModifiers (UnitAbilityType, ModifierId) VALUES 
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD'),
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE'),
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE');

<!-- TODO: TypeTagで紐付け；参考→https://github.com/CivilizationVIBetterBalancedGame/BetterBalancedGame/blob/f4bc75cf4f93eb975735f764c2d7f3149331bebc/sql/XP1/Cree.sql#L28 -->
INSERT INTO Types (Type, Kind) VALUES
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'KIND_ABILITY');

INSERT INTO TypeTags (Type, Tag) VALUES
('Ability_KH_VAMPIRE_TRAIT_POST_COMBAT_YIELD', 'CLASS_VAMPIRE');

<!-- TODO: Typeに全部入れていく -->
INSERT OR IGNORE INTO Types (Type, Kind) VALUES

<!-- TODO: 日本語のみでいいから更新 -->
INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_GOLD', 'Preview', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_GOLD_DESCRIPTION'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_SCIENCE', 'Preview', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_SCIENCE_DESCRIPTION'),
('MODIFIER_KH_VAMPIRE_POST_COMBAT_YIELD_CULTURE', 'Preview', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_CULTURE_DESCRIPTION');


UPDATE LocalizedText
SET Text = '自然遺産を発見すると解除される。レイライン資源の位置が明らかになる。レイラインはすべての専門区域に大きな隣接ボーナスをもたらす。全てのキャンパスは[ICON_HOUSING]+2と[ICON_AMENITIES]+1を得る。'
WHERE Tag = 'LOC_GOVERNOR_PROMOTION_HERMETIC_ORDER_1_DESCRIPTION';

UPDATE LocalizedText
SET Text = '現在の政府に経済政策スロット+1。都市国家に[ICON_TradeRoute]交易路を繋いだ際にその都市国家に無償の[Icon_Envoy]代表団を1つ派遣する。国外への[ICON_TradeRoute]交易路から追加の[ICON_FOOD]食料+2、[ICON_PRODUCTION]生産力+2、[ICON_GOLD]ゴールド+4が得られる。'
WHERE Tag = 'LOC_GOVERNOR_PROMOTION_OWLS_OF_MINERVA_1_DESCRIPTION';

INSERT OR IGNORE INTO LocalizedText (Language, Tag, Text) VALUES
('ja_JP', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_GOLD_DESCRIPTION', '戦闘に勝利すると、そのユニットの基本 [ICON_Strength] 戦闘力の50%に相当する [ICON_Gold] ゴールドを得る (速度オンラインで)'),
('ja_JP', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_SCIENCE_DESCRIPTION', '戦闘に勝利すると、そのユニットの基本 [ICON_Strength] 戦闘力の25%に相当する [ICON_Science] 科学を得る (速度オンラインで)'),
('ja_JP', 'LOC_KH_ABILITY_VAMPIRE_POST_COMBAT_YIELD_CULTURE_DESCRIPTION', '戦闘に勝利すると、そのユニットの基本 [ICON_Strength] 戦闘力の25%に相当する [ICON_Culture] 文化を得る (速度オンラインで)'),
('ja_JP', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_FOOD_DESCRIPTION', '国外への[ICON_TradeRoute]交易路から追加の[ICON_FOOD]食料+2が得られる。'),
('ja_JP', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_PRODUCTION_DESCRIPTION', '国外への[ICON_TradeRoute]交易路から追加の[ICON_PRODUCTION]生産力+2が得られる。'),
('ja_JP', 'LOC_KH_MINERVA_TRADE_BONUS_YIELD_GOLD_DESCRIPTION', '国外への[ICON_TradeRoute]交易路から追加の[ICON_GOLD]ゴールド+2が得られる。'),
('ja_JP', 'LOC_KH_HERMES_CAMPUS_AMENITY_DESCRIPTION', 'キャンパスは[ICON_AMENITIES]快適性+1を得る'),
('ja_JP', 'LOC_KH_HERMES_CAMPUS_HOUSING_DESCRIPTION', 'キャンパスは[ICON_HOUSING]住宅+2を得る);

